<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casa de Paz - Sistema de Gest√£o</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            background: white;
            border-radius: 15px 15px 0 0;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .nav-tab.active {
            background: white;
            border-bottom-color: #667eea;
            color: #667eea;
        }

        .nav-tab:hover {
            background: #e9ecef;
        }

        .content {
            background: white;
            border-radius: 0 0 15px 15px;
            padding: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            min-height: 600px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);
        }

        .card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid #667eea;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .card h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-top: 4px solid #667eea;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        .report-item {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid #28a745;
        }

        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .report-date {
            color: #666;
            font-size: 0.9rem;
        }

        .conversion-badge {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .no-conversion {
            background: #6c757d;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            header h1 {
                font-size: 2rem;
            }
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #c3e6cb;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üè† Casa de Paz</h1>
            <p>Sistema de Gest√£o e Relat√≥rios</p>
        </header>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('dashboard')">Dashboard</button>
            <button class="nav-tab" onclick="showTab('novo-relatorio')">Novo Relat√≥rio</button>
            <button class="nav-tab" onclick="showTab('relatorios')">Relat√≥rios</button>
            <button class="nav-tab" onclick="showTab('sobre')">Sobre Casa de Paz</button>
        </div>

        <div class="content">
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <h2>Dashboard - Casa de Paz</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="total-casas">0</div>
                        <div class="stat-label">Casas de Paz Ativas</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-pessoas">0</div>
                        <div class="stat-label">Pessoas Alcan√ßadas</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-conversoes">0</div>
                        <div class="stat-label">Convers√µes Esta Semana</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-lideres">0</div>
                        <div class="stat-label">L√≠deres Ativos</div>
                    </div>
                </div>

                <div class="card">
                    <h3>üìä √öltimas Atividades</h3>
                    <div id="ultimas-atividades">
                        <p style="color: #666; text-align: center; padding: 20px;">
                            Nenhum relat√≥rio ainda. Adicione o primeiro relat√≥rio para come√ßar!
                        </p>
                    </div>
                </div>
            </div>

            <!-- Novo Relat√≥rio Tab -->
            <div id="novo-relatorio" class="tab-content">
                <h2>üìù Novo Relat√≥rio Semanal</h2>
                
                <div class="success-message" id="success-message">
                    Relat√≥rio salvo com sucesso!
                </div>

                <form id="relatorio-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="lider">Nome do L√≠der</label>
                            <input type="text" id="lider" name="lider" required placeholder="Digite o nome do l√≠der">
                        </div>
                        <div class="form-group">
                            <label for="data">Data do Relat√≥rio</label>
                            <input type="date" id="data" name="data" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="local">Local da Casa de Paz</label>
                            <input type="text" id="local" name="local" required placeholder="Endere√ßo ou bairro">
                        </div>
                        <div class="form-group">
                            <label for="pessoas">Quantidade de Pessoas Presentes</label>
                            <input type="number" id="pessoas" name="pessoas" min="0" required placeholder="0">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="atividades">Atividades Realizadas Durante a Semana</label>
                        <textarea id="atividades" name="atividades" required placeholder="Descreva as principais atividades realizadas na casa de paz durante esta semana..."></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="conversoes">Houve Convers√µes?</label>
                            <select id="conversoes" name="conversoes" onchange="toggleConversaoDetalhes()">
                                <option value="nao">N√£o houve convers√µes</option>
                                <option value="sim">Sim, houve convers√µes</option>
                            </select>
                        </div>
                        <div class="form-group" id="qtd-conversoes-group" style="display: none;">
                            <label for="qtd-conversoes">Quantas Pessoas Aceitaram Jesus?</label>
                            <input type="number" id="qtd-conversoes" name="qtd-conversoes" min="1" placeholder="0">
                        </div>
                    </div>

                    <div class="form-group" id="nomes-conversoes-group" style="display: none;">
                        <label for="nomes-conversoes">Nomes das Pessoas que Aceitaram Jesus (opcional)</label>
                        <textarea id="nomes-conversoes" name="nomes-conversoes" placeholder="Digite os nomes das pessoas que aceitaram Jesus..."></textarea>
                    </div>

                    <div class="form-group">
                        <label for="observacoes">Observa√ß√µes Gerais</label>
                        <textarea id="observacoes" name="observacoes" placeholder="Outras observa√ß√µes importantes sobre a semana..."></textarea>
                    </div>

                    <button type="submit" class="btn">üíæ Salvar Relat√≥rio</button>
                </form>
            </div>

            <!-- Relat√≥rios Tab -->
            <div id="relatorios" class="tab-content">
                <h2>üìã Relat√≥rios Salvos</h2>
                
                <div class="form-group" style="max-width: 300px;">
                    <label for="filtro-lider">Filtrar por L√≠der</label>
                    <select id="filtro-lider" onchange="filtrarRelatorios()">
                        <option value="">Todos os l√≠deres</option>
                    </select>
                </div>

                <div id="lista-relatorios">
                    <p style="color: #666; text-align: center; padding: 40px;">
                        Nenhum relat√≥rio encontrado. Adicione relat√≥rios na aba "Novo Relat√≥rio".
                    </p>
                </div>
            </div>

            <!-- Sobre Tab -->
            <div id="sobre" class="tab-content">
                <h2>üè† O que √© Casa de Paz?</h2>
                
                <div class="card">
                    <h3>Defini√ß√£o</h3>
                    <p>Casa de Paz √© um modelo de minist√©rio crist√£o onde fam√≠lias abrem suas casas para realizar encontros regulares com vizinhos, amigos e comunidade local, criando um ambiente acolhedor para compartilhar o amor de Cristo, estudar a Palavra de Deus e desenvolver relacionamentos genu√≠nos.</p>
                </div>

                <div class="card">
                    <h3>üéØ Objetivos Principais</h3>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        <li><strong>Evangeliza√ß√£o:</strong> Alcan√ßar pessoas que ainda n√£o conhecem Jesus</li>
                        <li><strong>Discipulado:</strong> Acompanhar o crescimento espiritual dos novos convertidos</li>
                        <li><strong>Comunh√£o:</strong> Criar v√≠nculos de amor e cuidado m√∫tuo</li>
                        <li><strong>Multiplica√ß√£o:</strong> Formar novos l√≠deres e abrir novas casas</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>üìÖ Atividades T√≠picas</h3>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        <li>Estudos b√≠blicos contextualizados</li>
                        <li>Momentos de ora√ß√£o e intercess√£o</li>
                        <li>Testemunhos e compartilhamento de experi√™ncias</li>
                        <li>Atividades sociais e confraterniza√ß√£o</li>
                        <li>Atendimento a necessidades pr√°ticas da comunidade</li>
                        <li>Celebra√ß√µes e eventos especiais</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>üë• Papel do L√≠der</h3>
                    <p>O l√≠der da Casa de Paz √© respons√°vel por facilitar os encontros, pastorear os participantes, reportar as atividades √† lideran√ßa da igreja e buscar constantemente o crescimento espiritual e num√©rico do grupo. √â fundamental que seja uma pessoa de ora√ß√£o, com vida exemplar e cora√ß√£o evangel√≠stico.</p>
                </div>

                <div class="card">
                    <h3>üìà Import√¢ncia dos Relat√≥rios</h3>
                    <p>Os relat√≥rios semanais s√£o essenciais para acompanhar o desenvolvimento de cada casa, identificar necessidades, celebrar vit√≥rias, planejar estrat√©gias de crescimento e manter a comunh√£o entre todas as casas da rede ministerial.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dados armazenados em mem√≥ria
        let relatorios = JSON.parse(localStorage.getItem('relatorios-casa-paz') || '[]');
        let lideres = new Set();

        // Inicializar aplica√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            // Definir data atual no formul√°rio
            document.getElementById('data').valueAsDate = new Date();
            
            // Carregar dados
            carregarDados();
            atualizarDashboard();
            atualizarListaRelatorios();
            atualizarFiltroLideres();
        });

        // Fun√ß√£o para mostrar tabs
        function showTab(tabId) {
            // Esconder todos os conte√∫dos
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));
            
            // Remover classe active de todos os bot√µes
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Mostrar conte√∫do selecionado
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // Toggle para mostrar campos de convers√£o
        function toggleConversaoDetalhes() {
            const conversoes = document.getElementById('conversoes').value;
            const qtdGroup = document.getElementById('qtd-conversoes-group');
            const nomesGroup = document.getElementById('nomes-conversoes-group');
            
            if (conversoes === 'sim') {
                qtdGroup.style.display = 'block';
                nomesGroup.style.display = 'block';
                document.getElementById('qtd-conversoes').required = true;
            } else {
                qtdGroup.style.display = 'none';
                nomesGroup.style.display = 'none';
                document.getElementById('qtd-conversoes').required = false;
                document.getElementById('qtd-conversoes').value = '';
                document.getElementById('nomes-conversoes').value = '';
            }
        }

        // Salvar relat√≥rio
        document.getElementById('relatorio-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const relatorio = {
                id: Date.now(),
                lider: formData.get('lider'),
                data: formData.get('data'),
                local: formData.get('local'),
                pessoas: parseInt(formData.get('pessoas')),
                atividades: formData.get('atividades'),
                conversoes: formData.get('conversoes') === 'sim',
                qtdConversoes: parseInt(formData.get('qtd-conversoes') || 0),
                nomesConversoes: formData.get('nomes-conversoes') || '',
                observacoes: formData.get('observacoes') || ''
            };
            
            relatorios.push(relatorio);
            salvarDados();
            
            // Mostrar mensagem de sucesso
            document.getElementById('success-message').style.display = 'block';
            setTimeout(() => {
                document.getElementById('success-message').style.display = 'none';
            }, 3000);
            
            // Limpar formul√°rio
            this.reset();
            document.getElementById('data').valueAsDate = new Date();
            toggleConversaoDetalhes();
            
            // Atualizar dados
            atualizarDashboard();
            atualizarListaRelatorios();
            atualizarFiltroLideres();
        });

        // Carregar dados do localStorage
        function carregarDados() {
            // Atualizar conjunto de l√≠deres
            lideres.clear();
            relatorios.forEach(rel => lideres.add(rel.lider));
        }

        // Salvar dados no localStorage
        function salvarDados() {
            localStorage.setItem('relatorios-casa-paz', JSON.stringify(relatorios));
            carregarDados();
        }

        // Atualizar dashboard
        function atualizarDashboard() {
            const casasAtivas = new Set(relatorios.map(r => r.lider)).size;
            const totalPessoas = relatorios.reduce((sum, r) => sum + r.pessoas, 0);
            
            // Convers√µes desta semana (√∫ltimos 7 dias)
            const agora = new Date();
            const seteDiasAtras = new Date(agora.getTime() - (7 * 24 * 60 * 60 * 1000));
            const conversoesRecentes = relatorios
                .filter(r => new Date(r.data) >= seteDiasAtras && r.conversoes)
                .reduce((sum, r) => sum + r.qtdConversoes, 0);
            
            document.getElementById('total-casas').textContent = casasAtivas;
            document.getElementById('total-pessoas').textContent = totalPessoas;
            document.getElementById('total-conversoes').textContent = conversoesRecentes;
            document.getElementById('total-lideres').textContent = lideres.size;
            
            // Atualizar √∫ltimas atividades
            atualizarUltimasAtividades();
        }

        // Atualizar √∫ltimas atividades
        function atualizarUltimasAtividades() {
            const container = document.getElementById('ultimas-atividades');
            const ultimosRelatorios = relatorios
                .sort((a, b) => new Date(b.data) - new Date(a.data))
                .slice(0, 5);
            
            if (ultimosRelatorios.length === 0) {
                container.innerHTML = '<p style="color: #666; text-align: center; padding: 20px;">Nenhum relat√≥rio ainda. Adicione o primeiro relat√≥rio para come√ßar!</p>';
                return;
            }
            
            container.innerHTML = ultimosRelatorios.map(rel => `
                <div class="report-item">
                    <div class="report-header">
                        <strong>${rel.lider}</strong>
                        <div>
                            <span class="report-date">${formatarData(rel.data)}</span>
                            ${rel.conversoes ? `<span class="conversion-badge">${rel.qtdConversoes} convers√£o(√µes)</span>` : `<span class="conversion-badge no-conversion">Sem convers√µes</span>`}
                        </div>
                    </div>
                    <p><strong>Local:</strong> ${rel.local}</p>
                    <p><strong>Pessoas:</strong> ${rel.pessoas}</p>
                    <p><strong>Atividades:</strong> ${rel.atividades.substring(0, 150)}${rel.atividades.length > 150 ? '...' : ''}</p>
                </div>
            `).join('');
        }

        // Atualizar lista de relat√≥rios
        function atualizarListaRelatorios() {
            const container = document.getElementById('lista-relatorios');
            const relatoriosOrdenados = relatorios.sort((a, b) => new Date(b.data) - new Date(a.data));
            
            if (relatoriosOrdenados.length === 0) {
                container.innerHTML = '<p style="color: #666; text-align: center; padding: 40px;">Nenhum relat√≥rio encontrado. Adicione relat√≥rios na aba "Novo Relat√≥rio".</p>';
                return;
            }
            
            container.innerHTML = relatoriosOrdenados.map(rel => `
                <div class="report-item">
                    <div class="report-header">
                        <h4>${rel.lider} - ${rel.local}</h4>
                        <div>
                            <span class="report-date">${formatarData(rel.data)}</span>
                            ${rel.conversoes ? `<span class="conversion-badge">${rel.qtdConversoes} convers√£o(√µes)</span>` : `<span class="conversion-badge no-conversion">Sem convers√µes</span>`}
                        </div>
                    </div>
                    <p><strong>Pessoas Presentes:</strong> ${rel.pessoas}</p>
                    <p><strong>Atividades:</strong> ${rel.atividades}</p>
                    ${rel.conversoes ? `<p><strong>Convers√µes:</strong> ${rel.qtdConversoes} pessoas aceitaram Jesus</p>` : ''}
                    ${rel.nomesConversoes ? `<p><strong>Nomes:</strong> ${rel.nomesConversoes}</p>` : ''}
                    ${rel.observacoes ? `<p><strong>Observa√ß√µes:</strong> ${rel.observacoes}</p>` : ''}
                </div>
            `).join('');
        }

        // Atualizar filtro de l√≠deres
        function atualizarFiltroLideres() {
            const select = document.getElementById('filtro-lider');
            const lideresArray = Array.from(lideres).sort();
            
            select.innerHTML = '<option value="">Todos os l√≠deres</option>' +
                lideresArray.map(lider => `<option value="${lider}">${lider}</option>`).join('');
        }

        // Filtrar relat√≥rios por l√≠der
        function filtrarRelatorios() {
            const filtro = document.getElementById('filtro-lider').value;
            const container = document.getElementById('lista-relatorios');
            
            let relatoriosFiltrados = relatorios;
            if (filtro) {
                relatoriosFiltrados = relatorios.filter(rel => rel.lider === filtro);
            }
            
            const relatoriosOrdenados = relatoriosFiltrados.sort((a, b) => new Date(b.data) - new Date(a.data));
            
            if (relatoriosOrdenados.length === 0) {
                container.innerHTML = '<p style="color: #666; text-align: center; padding: 40px;">Nenhum relat√≥rio encontrado para este filtro.</p>';
                return;
            }
            
            container.innerHTML = relatoriosOrdenados.map(rel => `
                <div class="report-item">
                    <div class="report-header">
                        <h4>${rel.lider} - ${rel.local}</h4>
                        <div>
                            <span class="report-date">${formatarData(rel.data)}</span>
                            ${rel.conversoes ? `<span class="conversion-badge">${rel.qtdConversoes} convers√£o(√µes)</span>` : `<span class="conversion-badge no-conversion">Sem convers√µes</span>`}
                        </div>
                    </div>
                    <p><strong>Pessoas Presentes:</strong> ${rel.pessoas}</p>
                    <p><strong>Atividades:</strong> ${rel.atividades}</p>
                    ${rel.conversoes ? `<p><strong>Convers√µes:</strong> ${rel.qtdConversoes} pessoas aceitaram Jesus</p>` : ''}
                    ${rel.nomesConversoes ? `<p><strong>Nomes:</strong> ${rel.nomesConversoes}</p>` : ''}
                    ${rel.observacoes ? `<p><strong>Observa√ß√µes:</strong> ${rel.observacoes}</p>` : ''}
                </div>
            `).join('');
        }

        // Formatar data
        function formatarData(data) {
            return new Date(data + 'T00:00:00').toLocaleDateString('pt-BR');
        }
    </script>
</body>
</html>